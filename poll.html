<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vote on this Poll</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style> 
        body { font-family: 'Inter', sans-serif; } 
        .result-bar-fill { transition: width 0.8s ease-in-out; } 
        .image-preview { width: 40px; height: 40px; object-fit: cover; border-radius: 8px; margin-right: 12px; } 
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-white to-cyan-50 flex items-center justify-center min-h-screen p-4">

    <div id="loading-section" class="text-center"> 
        <p class="text-lg font-semibold text-gray-700 animate-pulse">Loading Poll...</p> 
    </div>

    <div class="w-full max-w-lg transition-all duration-500">
        <div id="vote-section" class="bg-white/70 backdrop-blur-xl p-8 rounded-2xl shadow-xl ring-1 ring-gray-900/5 hidden">
            
            <div id="poll-logo-container" class="mb-6 flex justify-center">
                <img id="poll-logo-display" src="" alt="Poll Logo" class="max-h-40 rounded-lg shadow-md hidden">
            </div>

            <h2 id="vote-question" class="text-2xl font-bold text-gray-800 mb-8 text-center"></h2>
            <div id="vote-options-container" class="space-y-3"></div>
            <button onclick="submitVote()" class="w-full mt-8 bg-gradient-to-r from-green-500 to-emerald-400 text-white font-bold py-3 px-4 rounded-lg hover:brightness-110 transition-all duration-300 transform hover:scale-105 flex items-center justify-center space-x-2">
                <span>Submit Vote</span>
            </button>
            <p id="vote-error" class="text-red-500 text-center mt-4 hidden"></p>
        </div>

        <div id="results-section" class="bg-white/70 backdrop-blur-xl p-8 rounded-2xl shadow-xl ring-1 ring-gray-900/5 hidden">
            </div>
    </div>
    <script>
        const API_URL = ''; let currentPoll = {};
        function showSection(sectionId) { /* ... same as before ... */ }
        window.onload = async () => {
            const params = new URLSearchParams(window.location.search);
            const pollId = params.get('id');
            if (!pollId) { /* ... same as before ... */ return; }
            try {
                const response = await fetch(`${API_URL}/api/poll/${pollId}`);
                if (!response.ok) throw new Error('Poll not found.');
                currentPoll = await response.json();
                
                // <<< YAHAN BADLAV KIYA GAYA HAI >>>
                // Logo को display करने के लिए
                const logoDisplay = document.getElementById('poll-logo-display');
                if (currentPoll.logo) {
                    logoDisplay.src = `${API_URL}/${currentPoll.logo.replace(/\\/g, '/')}`;
                    logoDisplay.classList.remove('hidden');
                }
                
                renderVoteScreen();
                document.getElementById('loading-section').classList.add('hidden');
                document.getElementById('vote-section').classList.remove('hidden');
            } catch (error) { document.getElementById('loading-section').innerText = `Error: ${error.message}`; }
        };

        // (बाकी का JavaScript कोड बिलकुल वैसा ही रहेगा)
        function renderVoteScreen() { document.getElementById('vote-question').textContent = currentPoll.question; const container = document.getElementById('vote-options-container'); container.innerHTML = ''; currentPoll.options.forEach((option, index) => { const imageUrl = option.image ? `${API_URL}/${option.image.replace(/\\/g, '/')}` : ''; const optionEl = document.createElement('label'); optionEl.className = 'flex items-center w-full px-5 py-4 border border-gray-200 rounded-lg cursor-pointer hover:border-blue-500 has-[:checked]:bg-blue-100 has-[:checked]:border-blue-600 has-[:checked]:ring-2 has-[:checked]:ring-blue-300 transition-all duration-300'; optionEl.innerHTML = `<input type="radio" name="vote_option" value="${index}" class="sr-only"> ${imageUrl ? `<img src="${imageUrl}" alt="${option.text}" class="image-preview">` : ''} <span class="font-medium text-gray-700">${option.text}</span>`; container.appendChild(optionEl); }); }
        async function submitVote() { /* ... same as before ... */ }
        function renderResultsScreen(poll) { /* ... same as before ... */ }
    </script>
</body>
</html>
